<div
  class="min-h-screen flex flex-col items-center pt-8 pb-8 relative animate-fadeIn motion-safe:transition-all motion-safe:duration-300"
>
  <app-room-header
    [copyingLink]="copyingLink"
    (copyInviteLink)="copyInviteLink.emit()"
    (leave)="leave.emit()"
  ></app-room-header>

  <div class="mb-12 animate-scaleIn motion-safe:transition-all motion-safe:duration-300">
    <div class="overflow-hidden rounded-[40px] shadow-2xl relative group">
      <div
        class="absolute inset-0 bg-gradient-to-tr from-blue-500/30 to-purple-500/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500"
      ></div>
      <div
        class="absolute -top-20 -right-20 w-40 h-40 bg-blue-400 rounded-full blur-3xl opacity-30 group-hover:opacity-60 transition-opacity duration-500"
      ></div>
      <div
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 bg-white rounded-full blur-3xl opacity-0 group-hover:opacity-20 transition-opacity duration-700"
      ></div>

      <img
        src="images/planning-poker.webp"
        alt="Planning Poker"
        class="h-80 w-auto object-cover transition-transform duration-700 group-hover:scale-105 mask-radial-at-center mask-radial-from-80% mask-radial-to-95%"
      />
      <div
        class="absolute top-0 left-0 right-0 h-1/4 bg-gradient-to-b from-white/20 to-transparent pointer-events-none"
      ></div>
    </div>
  </div>

  <div class="mb-6 min-h-[144px]">
    <div class="grid grid-cols-6 gap-4 justify-center">
      @if (votes) {
        @for (vote of votes; track $index) {
          <app-vote-card
            [vote]="vote"
            [showNullVote]="hasNullVotes(votes)"
            [estimationType]="state.estimationType || 'fibonacci'"
            [allVoted]="(usersVotedCount ?? 0) === (usersConnectedCount ?? 0) && (usersConnectedCount ?? 0) > 0"
          ></app-vote-card>
        }
      }
    </div>
    @if (usersConnectedCount) {
      @if (usersVotedCount) {
        <p class="text-gray-300 text-center font-mono mt-6">
          {{ usersVotedCount }}/{{ usersConnectedCount }} players voted
        </p>
      } @else {
        <p class="text-gray-300 text-center font-mono mt-6">Waiting for players to vote...</p>
      }
    }
  </div>

  @if (!state.isSpectator) {
    <app-vote-controls
      [numbers]="numbers"
      [tshirtSizes]="tshirtSizes"
      [selectedNumber]="selectedNumber"
      [selectedSize]="selectedSize"
      [estimationType]="state.estimationType || 'fibonacci'"
      (valueSelected)="valueSelected.emit($event)"
    ></app-vote-controls>
  }

  <app-room-stats
    [average]="averageVotes"
    [isHost]="state.isHost"
    [isSpectator]="state.isSpectator"
    [canChangeVote]="selectedNumber !== null && usersConnectedCount !== usersVotedCount"
    (deleteVote)="deleteVote.emit()"
    (resetVotes)="resetVotes.emit()"
  ></app-room-stats>

  <div class="absolute bottom-4 right-4 z-10 hidden md:flex items-center gap-2">
    <a
      href="https://www.linkedin.com/in/gallianoms/"
      target="_blank"
      rel="noopener noreferrer"
      class="text-gray-400 hover:text-emerald-400 transition-colors duration-300"
      aria-label="Galliano's LinkedIn profile"
    >
      <i-tabler
        name="brand-linkedin"
        class="`h-7! w-7!"
      ></i-tabler>
    </a>
    <span class="text-gray-400 font-mono">|</span>
    <a
      href="https://jsalvadev.github.io/"
      target="_blank"
      rel="noopener noreferrer"
      class="text-gray-400 hover:text-emerald-400 transition-colors duration-300 font-mono"
      aria-label="jsalvadev.github.io"
    >
      jsalvadev.github.io
    </a>
  </div>
</div>
